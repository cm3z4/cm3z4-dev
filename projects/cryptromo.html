<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cryptromo</title>
    <!-- Custom CSS [ START ] -->
    <style>
      body {
        background-color: #282a36;
        color: white;
        font-size: 1.2rem;
        font-family: monospace;
      }

      #wrapper {
        display: flex;
      }

      .cols {
        width: 33.33%;
      }

      .inputs {
        font-size: 1rem;
      }

      .buttons {
        color: #7289da;
        border: 2px solid #7289da;
        padding: 3px 6px;
        border-radius: 4px;
        cursor: pointer;
      }

      .buttons:hover {
        color: #99aab5;
        border: 2px solid #99aab5;
        padding: 3px 6px;
        border-radius: 4px;
        cursor: pointer;
      }

      .pink {
        color: #ff5f85;
      }

      .green {
        color: #6ded8a;
      }

      .yellow {
        color: #f0f14e;
      }

      .blue {
        color: #01cdfe;
      }

      #header {
        font-size: 0.4rem;
      }

      @media screen and (max-width: 600px) {
        #header {
          font-size: 8px;
        }

        #wrapper {
          flex-direction: column;
        }

        .cols {
          width: 100%;
        }
      }
    </style>
    <!-- Custom CSS [ END ] -->
  </head>
  <body>
    <div id="wrapper">
      <div class="cols">
        <pre class="pink" id="header">
 ██████╗██████╗ ██╗   ██╗██████╗ ████████╗██████╗  ██████╗ ███╗   ███╗ ██████╗ 
██╔════╝██╔══██╗╚██╗ ██╔╝██╔══██╗╚══██╔══╝██╔══██╗██╔═══██╗████╗ ████║██╔═══██╗
██║     ██████╔╝ ╚████╔╝ ██████╔╝   ██║   ██████╔╝██║   ██║██╔████╔██║██║   ██║
██║     ██╔══██╗  ╚██╔╝  ██╔═══╝    ██║   ██╔══██╗██║   ██║██║╚██╔╝██║██║   ██║
╚██████╗██║  ██║   ██║   ██║        ██║   ██║  ██║╚██████╔╝██║ ╚═╝ ██║╚██████╔╝
 ╚═════╝╚═╝  ╚═╝   ╚═╝   ╚═╝        ╚═╝   ╚═╝  ╚═╝ ╚═════╝ ╚═╝     ╚═╝ ╚═════╝</pre
        >
        <!-- You can add more options/currencies below by going to https://www.cryptonator.com/api/currencies, just addit to the list below. -->
        <p>
          <select id="currency" class="inputs">
            <option value="aave">Aave / AAVE</option>
            <option selected value="btc">Bitcoin / BTC</option>
            <option value="ada">Cardano / ADA</option>
            <option value="doge">Dogecoin / DOGE</option>
            <option value="eth">Ethereum / ETH</option>
            <option value="etc">Ethereum Classic / ETC</option>
            <option value="ltc">Lightcoin / LTC</option>
            <option value="xmr">Monero / XMR</option>
          </select>
          <span id="refresh" class="buttons">Refresh</span>
        </p>
        <h2 id="current-price" class="green"></h2>
        <p class="blue">
          <input type="number" value="3" id="percent-input" class="inputs" /> %
        </p>
        <p>Delta: <span id="delta-price" class="yellow"></span></p>
        <p>Target Price: <span id="target-price" class="yellow"></span></p>
        <p>
          Equity:
          <input type="text" value="500" id="equity-input" class="inputs" />
        </p>
        <p>Profit: <span id="profit" class="pink"></span></p>
        <p class="green">
          --------------------------<br />Precalculated<br />--------------------------
        </p>
        <p class="blue">
          3% <span id="3-target" class="yellow"></span>
          <span id="3-profit" class="pink"></span>
        </p>
        <p class="blue">
          5% <span id="5-target" class="yellow"></span>
          <span id="5-profit" class="pink"></span>
        </p>
        <p class="blue">
          7% <span id="7-target" class="yellow"></span>
          <span id="7-profit" class="pink"></span>
        </p>
      </div>

      <div class="cols">
        <p class="green">
          --------------------------<br />Delta Tools<br />--------------------------
        </p>
        <p id="delta-c-sol" class="yellow">0</p>
        <p>
          What is <input type="number" value="2" id="delta-c-1a" /><span
            class="inputs blue"
          >
            %</span
          >
          of<br /><br /><input
            type="text"
            id="delta-c-1b"
            value="1000"
            class="inputs"
          />
          ? <span id="delta-1-clear" class="buttons">Clear</span>
        </p>
      </div>
    </div>
    <!-- jQuery CDN -->
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script>
      let selectCurrency;
      let currentPrice;

      function doWorkSon() {
        selectCurrency = $("#currency").val();
        console.log(selectCurrency);
        $.ajax({
          url: `https://api.cryptonator.com/api/full/${selectCurrency}-usd`,
          success: function (data) {
            console.log(data);
            currentPrice = parseFloat(data.ticker.price);
            $("#current-price").text(currentPrice);
            populateShit();
          },
        });
      }

      function populateShit() {
        let percentInput = $("#percent-input").val() / 100;
        let deltaPrice = currentPrice * percentInput;
        let equityInput = $("#equity-input").val();
        let targetPrice = currentPrice * percentInput + currentPrice;
        let targetPrice3P = currentPrice * 0.03 + currentPrice;
        let targetPrice5P = currentPrice * 0.05 + currentPrice;
        let targetPrice7P = currentPrice * 0.07 + currentPrice;
        let profit3P = 0.03 * equityInput;
        let profit5P = 0.05 * equityInput;
        let profit7P = 0.07 * equityInput;
        $("#target-price").text(targetPrice);
        $("#delta-price").text(deltaPrice);
        $("#profit").text(percentInput * equityInput);
        $("#3-target").text(targetPrice3P);
        $("#5-target").text(targetPrice5P);
        $("#7-target").text(targetPrice7P);
        $("#3-profit").text(profit3P);
        $("#5-profit").text(profit5P);
        $("#7-profit").text(profit7P);
      }

      $("#percent-input").on("change", function () {
        populateShit();
      });

      $("#equity-input").on("change", function () {
        populateShit();
      });

      $("#currency").on("change", function () {
        doWorkSon();
      });

      $("#refresh").on("click", function () {
        doWorkSon();
      });

      // Delta 1 section.
      $("#delta-c-1a, #delta-c-1b").on("change", function () {
        $("#delta-c-sol").text(
          ($("#delta-c-1a").val() / 100) * $("#delta-c-1b").val()
        );
      });

      $("#delta-c-sol").text(
        ($("#delta-c-1a").val() / 100) * $("#delta-c-1b").val()
      );

      $("#delta-1-clear").on("click", function () {
        $("#delta-c-1a").val("");
        $("#delta-c-1b").val("");
      });

      doWorkSon();
    </script>
  </body>
</html>
